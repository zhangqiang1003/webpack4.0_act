# 专题开发
## 头部底部插件引用
使用头部底部插件,需要引入`jquery`、智齿、极验证以及头部底部插件的`css`文件`new_plugin_header_footer.css`和`js`文件`new_plugin_header_footer.js`。js文件会暴露一个全局变量`newPlugin`对象,`newPlugin`对象包含以下常用属性和方法:
+ 属性
> `loginStatus`: 登录状态
> `activityData`: 活动列表
> `userName`: 用户名
> `userPass`: 用户密码

+ 方法
> `init`: 初始化
> `getActivity`: 获取活动列表
> `showLoginModal`: 显示登录蒙层
> `closeLoginModal`: 关闭登录蒙层
> `getLoginStatus`: 登录状态检测
> `login`：登录
> `logOut`： 退出登录
### css引入
```htmlbars
<link rel="stylesheet" href="/static/specials/css/new_plugin_header_footer.css">
```
### js引入
```htmlbars
	<script type="text/javascript" src="/static/specials/js/jquery.js"></script>
	<!--智齿客服-->
<script src="https://www.sobot.com/chat/frame/js/entrance.js?sysNum=072c38afdfa44956a84fc2fcc697b069" class="zhiCustomBtn" id="zhichiScript" data-args="manual=true"></script>
	<!--极验证-->
	<script type="text/javascript" src="/static/official_web/js/login/gt.js"></script>
	<script type="text/javascript" src="/static/specials/js/new_plugin_header_footer.js"></script>
```
### DOM插入
```htmlbars
<!--头部部分-->
<div class="new-plugin-header"></div>
<!--服务部分-->
<div class="new-plugin-service"></div>
<!--脚步部分-->
<div class="new-plugin-footer"></div>
```
### 初始化
```javascript
 /**
  * 初始化
  * @param theme 主题，默认为浅色主题，接受参数`dark`或者`white`
  */
  newPlugin.init()
```

### 头部底部插件使用注意：
**内容容器须距离顶部100px**

## 支付插件使用
同头部底部插件，前提须引用`jquery`以及`pay.js`。
### css引用
```htmlbars
<link rel="stylesheet" href="/static/specials/css/payment_style.css">
```
### js引用
```htmlbars
<script type="text/javascript" src="/static/specials/js/jquery.js"></script>
```
js文件暴露一个`paymentOb`全局对象变量，包含以下属性方法：
+ 属性
> `packageId`: 套餐ID
> `activityId`： 活动ID
> `paymentModalPayment`: 支付方式
> `paymentModalIsFinish`: 是否立即生效（购买的套餐里面包含联机宝和超级会员时）
> `isRealAndVip`: 是否是联机宝+超级会员
> `getUserAddressOk`: 是否已经获取到用户收货地址
> `expressWay`: 快递方式，ordinary为普通快递； sf为顺丰快递

+ 方法
> `get_order`： 获取订单信息
> `payment`: 支付
> `showAddress`: 显示地址用户地址信息
> `paymentModalShow`: 支付弹框显示 realAndVip:是否有实物+会员时长（1.是 2.否）
> `paymentModalClose`: 支付弹框关闭
> `paymentChoose`: 选择支付方式
> `paymentIsFinishChoose`: 选择是否立即生效
> `createPaymentModal`: 创建支付蒙层
> `chooseExpressWay`: 选举则快递方式
```javascript
  /**
   * 
   * @param {*} pid 套餐ID
   * @param {*} aid 活动ID
   * @param {*} realAndVip 是否是会员+联机宝 1：是， 2：否
   */
   paymentOb.get_order(1, 1, 1);
```

### DOM插入
```htmlbars
<div class="payment-modal-mask"></div>
```
## 页面
### meta信息
```htmlbars
<!-- 启用360浏览器的极速模式(webkit)360 使用Google Chrome Frame ,360 浏览器就会在读取到这个标签后，立即切换对应的极速核。 另外为了保险起见再加入优先使用IE最新版本和Chrome,这样写可以达到的效果是如果安装了 Google Chrome Frame，则使用 GCF 来渲染页面，如果没有安装 GCF，则使用最高版本的 IE 内核进行渲染-->
<meta name="renderer" content="webkit">
<!-- 优先使用IE最新版本和Chrome -->
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
```        
### 内容区域
内容区域宽度不超过1300px，PC端单行文字块的的宽度不低于`12px`字体所占的宽度，移动端不得低于`10px`字体所占宽度，不然换行避免不了。

### 首屏
首屏需要突出的内容应该至少距离顶部100px或者设计高度减100px。
### 背景图片
背景图片宽度最大1920px，高分屏下，内容区域**`居中`**显示。背景图片的文件大小理论不超过400k，最大不超过700K，图片压缩工具[色彩笔](https://www.secaibi.com/tools/)、[tiny](https://tinypng.com/)。

## 代码
### 使用scss
+ `_mixin.scss`
定义了一些`混淆块`
+ `_tool.scss`
定义了一些`方法`
**建议**：在之后定义一个`_reset.scss`进行一些默认样式的重写以及编写一些诸如内容居中、水平居中、垂直居中等常用的类名
### 背景
图片背景响应设计的话，目前在我们专题中用了两种方案，按情况使用。
+ 使用rem
使用rem来布局的话，须先引入` <script src="/static/specials/js/flexible_pc.js"></script>`js文件，pc端默认是以192px为基准，可以按需求进行相应的修改。`_tool.scss`文件中定义了px转rem的方法。一般如果两个wrapper的背景不进行拼接的话，是可以通用的。
+ 使用img标签
使用图片将内容块撑开，再将内容绝对定位。wrapper背景需要拼接的时候，感觉这种方式好用一点。

## 移动端
使用`rem`布局引入`<script src="/static/specials/js/flexible.js"></script>`js文件，目前不需要引入头部底部插件，`_tool.scss`文件中已经定义好了`750px`设计稿的`rem`计算方法，直接使用即可。
### 移动端meta信息
```htmlbars
 <!-- 如果你的网站不是响应式的，请不要使用 initial-scale 或者禁用缩放。-->
 <meta name="viewport" content="width=device-width,user-scalable=yes">
 <!-- 禁止百度转码:通过百度手机打开网页时，百度可能会对你的网页进行转码，往你页面贴上它的广告，非常之恶心。可以通过这个meta标签来禁止它：-->
 <meta http-equiv="Cache-Control" content="no-siteapp">
```

# webpack_activity开发环境(1.0.0)
## 使用
### 创建资源文件

1. 在`/src/configHtml`的先配置`html文件名`;
2. 在`/src/specials/`路径下添加`html`文件;
3. 在`/src/static/specials/`路径下添加`css(less,scss)`，`js`和`图片文件`;
4. 在js文件中使用`import`方法引入css,js及`npm`下载的第三方插件;

### 命令行操作
```bash
# 开发环境
npm start
# 打包构建
npm run build
# 编译new_plugin_header_footer.js
npm run babel
```
## 注意
### 对于已有公共资源文件的处理
1. 原`/qeeyou_frontend/static/specials/`路径下的资源文件放到`/src/static/specials/plugin/`路径下；
2. 除情况1之外，其余`/qeeyou_frontend/static/`路径下的资源文件（夹）请在`/src/static/`路径下对应原有路径放置资源文件，并在`webpack.config.js`文件的插件配置`plugin`中找到`CopyWebpackPlugin`（`静态资源不打包插件`）配置即可；
3. `公共资源文件`按照原有方式在`html`文件中引入即可；

### 其他
1. `npm`下载第三方资源后，`import`在js文件中引入;
2. 打包后的资源文件，暂时需要手动移动到官网仓库的文件资源路径下;
3. 跨域请求接口，代理到`webtest.qeeyou.cn`;

## 建议或需求
1. 